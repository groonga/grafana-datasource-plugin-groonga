{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../node_modules/tslib/tslib.es6.js","webpack:///./ConfigEditor.tsx","webpack:///./DataSource.ts","webpack:///./QueryEditor.tsx","webpack:///./module.ts","webpack:///./query_def.ts","webpack:///./select_parameters.ts","webpack:///external \"@grafana/data\"","webpack:///external \"@grafana/runtime\"","webpack:///external \"@grafana/ui\"","webpack:///external \"lodash\"","webpack:///external \"react\""],"names":[],"mappings":"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","file":"module.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./module.ts\");\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import React, { ChangeEvent, PureComponent } from 'react';\nimport { LegacyForms, DataSourceHttpSettings } from '@grafana/ui';\nimport { DataSourcePluginOptionsEditorProps } from '@grafana/data';\nimport { GroongaOptions } from './types';\nconst { FormField } = LegacyForms;\n\ninterface Props extends DataSourcePluginOptionsEditorProps<GroongaOptions> {}\ninterface State {}\n\nexport class ConfigEditor extends PureComponent<Props, State> {\n  onTimeFieldChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const { onOptionsChange, options } = this.props;\n    const jsonData = {\n      ...options.jsonData,\n      timeField: event.target.value,\n    };\n    onOptionsChange({ ...options, jsonData });\n  };\n  onTableFieldChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const { onOptionsChange, options } = this.props;\n    const jsonData = {\n      ...options.jsonData,\n      tableField: event.target.value,\n    };\n    onOptionsChange({ ...options, jsonData });\n  };\n\n  render() {\n    const { options, onOptionsChange } = this.props;\n    const { jsonData } = options;\n\n    return (\n      <>\n        <div className=\"gf-form-group\">\n          <div className=\"gf-form\">\n            <DataSourceHttpSettings\n              defaultUrl={'http://localhost:10041'}\n              dataSourceConfig={options}\n              showAccessOptions={false}\n              onChange={onOptionsChange}\n            />\n          </div>\n        </div>\n        <h3 className=\"page-heading\">Groonga Details</h3>\n        <div className=\"gf-form-group\">\n          <div className=\"gf-form\">\n            <FormField\n              label=\"Default table name\"\n              labelWidth={20}\n              inputWidth={20}\n              onChange={this.onTableFieldChange}\n              value={jsonData.tableField || ''}\n              placeholder=\"\"\n            />\n          </div>\n          <div className=\"gf-form\">\n            <FormField\n              label=\"Default time field name\"\n              labelWidth={20}\n              inputWidth={20}\n              onChange={this.onTimeFieldChange}\n              value={jsonData.timeField || ''}\n              placeholder=\"\"\n            />\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n","import _ from 'lodash';\n\nimport { DataQueryRequest, DataQueryResponse, DataSourceApi, DataSourceInstanceSettings } from '@grafana/data';\nimport { getBackendSrv } from '@grafana/runtime';\nimport * as queryDef from './query_def';\nimport { GroongaOptions, GroongaQuery } from './types';\nimport { SelectParameters } from './select_parameters';\n\ninterface QueryInfo {\n  name: string;\n  index: number;\n  metric: boolean;\n}\ninterface TableDataInfo {\n  text: string;\n  type: string;\n}\ninterface TableDataFormat {\n  columns: TableDataInfo[];\n  rows: any[];\n}\n/*\ninterface GraphDataFormat {\n  target: string;\n  datapoints: [any,number]\n}\n*/\ntype GraphDataIndexs = {\n  time: number;\n  metric: number;\n  data: number;\n};\nfunction pushColumns(_tableDataFormat: TableDataFormat, _text: string, _type: string) {\n  // format is { \"text\": \"_id\", \"type\": \"number\" }\n  _tableDataFormat.columns.push({ text: _text, type: _type });\n}\n\nexport class DataSource extends DataSourceApi<GroongaQuery, GroongaOptions> {\n  headers: any;\n  withCredentials: boolean;\n  url: string;\n  name: string;\n  index: string;\n  tableField: string;\n  timeField: string;\n\n  constructor(instanceSettings: DataSourceInstanceSettings<GroongaOptions>) {\n    super(instanceSettings);\n    //this.basicAuth = instanceSettings.basicAuth === undefined ? '' : instanceSettings.basicAuth;\n    this.withCredentials = instanceSettings.withCredentials !== undefined;\n    this.url = instanceSettings.url === undefined ? '' : instanceSettings.url;\n    this.name = instanceSettings.name;\n    this.index = instanceSettings.database === undefined ? '' : instanceSettings.database;\n    const settingsData = instanceSettings.jsonData || ({} as GroongaOptions);\n    this.tableField = settingsData.tableField === undefined ? '' : settingsData.tableField;\n    this.timeField = settingsData.timeField === undefined ? '' : settingsData.timeField;\n\n    this.headers = { 'Content-Type': 'application/json' };\n    if (typeof instanceSettings.basicAuth === 'string' && instanceSettings.basicAuth.length > 0) {\n      this.headers['Authorization'] = instanceSettings.basicAuth;\n    }\n  }\n\n  // query API\n  async query(options: DataQueryRequest<GroongaQuery>): Promise<DataQueryResponse> {\n    let selectParams = new SelectParameters(\n      this.tableField,\n      this.timeField,\n      options.targets,\n      options.range.from.valueOf() / 1000,\n      options.range.to.valueOf() / 1000,\n      options.intervalMs === undefined ? 1000 : options.intervalMs\n    );\n    let serializedOptionStr = selectParams.buildQueryParameters();\n\n    return getBackendSrv()\n      .datasourceRequest({ url: this.url + '/d/select?' + serializedOptionStr })\n      .then(result => {\n        let selects = selectParams.isAggregate(0) ? result.data[1][1] : result.data[1][0];\n\n        if (queryDef.isGraphAggregateType(selectParams.aggs[0].aggType)) {\n          return this.createGraphResponse(selects, selectParams);\n        } else {\n          return this.createTableResponse(selects, selectParams);\n        }\n      });\n  }\n\n  // tastDatasource API\n  async testDatasource() {\n    // Implement a health check for your data source.\n    return this.doRequest({\n      url: this.url + '/d/status',\n      method: 'GET',\n    }).then((response: any) => {\n      if (response.status === 200) {\n        return { status: 'success', message: 'Data source is working', title: 'Success' };\n      }\n\n      return {\n        status: 'error',\n        message: `Data source is not working: ${response.message}`,\n        title: 'Error',\n      };\n    });\n  }\n  private doRequest(options: any) {\n    options.withCredentials = this.withCredentials;\n    options.headers = this.headers;\n    return getBackendSrv().datasourceRequest(options);\n  }\n\n  private getTypeStr(_type: string): string {\n    switch (_type) {\n      case 'Time':\n        return 'time';\n        break;\n      case 'Int8':\n      case 'Int16':\n      case 'Int32':\n      case 'Int64':\n      case 'UInt8':\n      case 'UInt16':\n      case 'UInt32':\n      case 'UInt64':\n      case 'Float':\n        return 'number';\n        break;\n      default:\n        return 'string';\n        break;\n    }\n  }\n\n  // 指定のカラムを探す\n  private getColumnIndex(_schema: string[], _colName: string) {\n    let colIndex = -1;\n    let colName = _colName.trim();\n\n    // 指定されている場合\n    if (colName !== '') {\n      // 正しい場合はtimeColIndexが-1以外になる\n      colIndex = _schema.findIndex((item: any) => item[0] === colName);\n    }\n    return colIndex;\n  }\n  // キーとなる時刻情報を探す\n  private getKeyColumnIndex(_schema: string[], _timeCol: string) {\n    let timeColIndex = -1;\n    let colName = _timeCol.trim();\n\n    // キーとなる時刻情報が指定されている場合\n    if (colName !== '') {\n      // 正しい場合はtimeColIndexが-1以外になる\n      timeColIndex = _schema.findIndex((item: any) => item === colName);\n    }\n\n    // キーとなる時刻情報が指定されていない場合(指定されたが間違っている場合含む):最初に見つかったTime型のカラムとする\n    if (timeColIndex === -1) {\n      // 見つかった場合はtimeColIndexが-1以外になる\n      timeColIndex = _schema.findIndex((item: any) => item[1] === 'Time');\n    }\n    return timeColIndex;\n  }\n\n  private extractGraphMetrics(\n    _gIndexs: GraphDataIndexs,\n    _select: any,\n    _selectParams: SelectParameters,\n    _aggIndex: number\n  ) {\n    let mets = ['__dummy__'];\n    let indexTTemp = -1;\n    let schema = _select[1];\n    schema.filter((c: any, i: number) => {\n      if (_gIndexs.data === -1) {\n        _gIndexs.data = i;\n      } else if (\n        c[0] === _selectParams.getAggTimeColName() ||\n        (_selectParams.isOnlyAggTimeCol(_aggIndex) && c[0] === '_key')\n      ) {\n        _gIndexs.time = i;\n      } else if (this.getTypeStr(c[1]) === 'time') {\n        indexTTemp = indexTTemp === -1 ? i : indexTTemp;\n      } else if (_gIndexs.metric === -1) {\n        _gIndexs.metric = i;\n      }\n    });\n    _gIndexs.time = _gIndexs.time === -1 ? indexTTemp : _gIndexs.time;\n\n    if (_gIndexs.metric === -1) {\n      mets.push('');\n    } else {\n      _select.filter((r: any, rowIndex: number) => {\n        if (rowIndex >= 2) {\n          let m = r[_gIndexs.metric];\n          if (!mets.includes(m)) {\n            mets.push(m);\n          }\n        }\n      });\n    }\n    mets.shift();\n    mets.sort();\n    return mets;\n  }\n\n  // キーとなる時刻情報が指定されていない場合は最初に見つかったTime型のカラムとする\n  // なぜかcfgtidがTimeと判定されるので、その小細工含めておく\n  // 見つからない場合は-1が返る\n  private createTableColumnHeader(\n    _tableDataFormat: TableDataFormat,\n    _queryIndexes: QueryInfo[],\n    _schema: string[],\n    _selectParams: SelectParameters\n  ): number {\n    let queries = _selectParams.getQueries();\n    let metrics = _selectParams.getMetrics(0);\n\n    function isMetricColumn(_colName: string, _metrics: string[] | undefined) {\n      if (_metrics === undefined || _metrics.length <= 0) {\n        return false;\n      }\n      return _metrics.findIndex((metric: string) => metric === _colName) !== -1;\n    }\n    function pushQueryIndexes(index: number) {\n      if (index !== -1) {\n        _queryIndexes?.push({\n          name: _schema[index][0],\n          index: index,\n          metric: isMetricColumn(_schema[index][0], metrics),\n        });\n      }\n    }\n\n    //_queryIndexes = [];\n    // キーとなる時刻情報を探す\n    let timeColIndex = this.getKeyColumnIndex(_schema, _selectParams.timeField);\n    //let metricColIndex = getColumnIndex(_schema, _metric);\n    let timeCol = _selectParams.timeField;\n    if (timeColIndex !== -1) {\n      pushColumns(_tableDataFormat, 'Time', 'time');\n      timeCol = _schema[timeColIndex][0];\n      _queryIndexes.push({ name: timeCol, index: timeColIndex, metric: true });\n    }\n    _tableDataFormat.columns.shift();\n    _queryIndexes.shift();\n\n    if (queries === undefined || queries.length <= 0) {\n      _schema.forEach((sch: any, index) => {\n        if (index !== timeColIndex) {\n          pushQueryIndexes(index);\n        }\n      });\n    } else {\n      queries?.forEach((colName: any) => {\n        let index = this.getColumnIndex(_schema, colName);\n        if (index !== timeColIndex) {\n          pushQueryIndexes(index);\n        }\n      });\n    }\n\n    _queryIndexes.forEach((queryIndex: any) => {\n      let columnName = _schema[queryIndex.index][0];\n      if (columnName === timeCol) {\n        //timeColIndex = col;\n        return;\n      }\n      let columnTypeStr = this.getTypeStr(_schema[queryIndex.index][1]);\n      pushColumns(_tableDataFormat, columnName, columnTypeStr);\n    });\n    return timeColIndex;\n  }\n  private createGraphResponse(_selects: any, _selectParams: SelectParameters): any {\n    let data = [{ target: '', datapoints: [{}] }];\n    data.shift();\n    _selectParams.aggs.forEach((agg: any, index: number) => {\n      let _select = _selects[agg.refId];\n\n      //let mets = ['__dummy__'];\n      let gIndexs: GraphDataIndexs = { time: -1, metric: -1, data: -1 };\n\n      if (_select.length > 1) {\n        // 集約キーの検索用の配列作成\n        let mets = this.extractGraphMetrics(gIndexs, _select, _selectParams, index);\n        // 集約キーをtargetとして保持\n        mets.forEach((m: any) => data.push({ target: m, datapoints: [{}] }));\n\n        // 複数Queryを同時に指定する場合\n        let bParallel = _selectParams.aggs.length > 1 && gIndexs.metric === -1;\n        let indexPtemp = data.findIndex((d: any, i: number) => d.target === '');\n        let indexP = bParallel ? (indexPtemp !== -1 ? indexPtemp : 0) : 0;\n\n        _select.filter((row: any, rowIndex: number) => {\n          if (rowIndex >= 2) {\n            let m = gIndexs.metric !== -1 ? row[gIndexs.metric] : '';\n            let t = gIndexs.time !== -1 ? row[gIndexs.time] : 0;\n            let d = gIndexs.data !== -1 ? row[gIndexs.data] : 0;\n            let i = mets.indexOf(m);\n            let index = bParallel ? indexP : i === -1 ? 0 : i;\n            data[index].datapoints.push([d, t * 1000]);\n          }\n        });\n\n        data.forEach((d: any) => {\n          d.datapoints.shift();\n        });\n\n        if (bParallel) {\n          data[indexP].target = agg.aggTarget;\n        }\n      }\n    });\n    return { data: data };\n  }\n  private createTableResponse(_select: any, _selectParams: SelectParameters): any {\n    let _schema: string[] = _select[1];\n    let queryIndexes = [{ name: '', index: -1, metric: false }];\n\n    // time column\n    let timeColIndex = -1;\n\n    let dataT = [];\n    let tableData: TableDataFormat = {\n      columns: [{ text: 'Time', type: 'time' }],\n      rows: [{}],\n    };\n    dataT.push(tableData);\n    timeColIndex = this.createTableColumnHeader(tableData, queryIndexes, _schema, _selectParams);\n    for (let row = 2; row < _select.length; row++) {\n      // row = 0 is datanum, row = 1 is data format\n      var record = _select[row];\n      var datapoints = tableData.rows;\n      let datas: any = [];\n\n      //for (let col = 0; col < schema.length; col++) {\n      queryIndexes.forEach(queryIndex => {\n        if (queryIndex.index === timeColIndex) {\n          datas.push(record[queryIndex.index] * 1000);\n        } else {\n          datas.push(record[queryIndex.index]);\n        }\n      });\n      datapoints.push(datas);\n    }\n    tableData.rows.shift();\n    return { data: dataT };\n  }\n}\n\n/*\n//sample\n// Grafana response data format : To Grafana Graph panel\ngraphData_Response_Format = [\n{\n  target: \"sample1\",\n  datapoints: [\n    [622, 1450754160000],\n    [365, 1450754220000],\n    [522, 1450755160000],\n    [465, 1450755220000],\n    [422, 1450765160000],\n    [765, 1450765220000],\n  ]\n},\n{\n  target: \"sample2\",\n  datapoints: [\n    [861, 1450754160000],\n    [767, 1450754220000],\n    [1161, 1450755160000],\n    [1267, 1450755220000],\n    [1361, 1450765160000],\n    [1467, 1450765220000],\n  ]\n}\n];\n// Grafana response data format : To Grafana Table/Stat panel\ntableData_Response_Format = [\n{\n  columns: [\n    { text: \"Time\", type: \"time\" },\n    { text: \"Country\", type: \"string\" },\n    { text: \"Number\", type: \"number\" }\n  ],\n  rows: [\n    [1450754160000, \"SE\", 123],\n    [1450754160000, \"DE\", 231],\n    [1450754160000, \"US\", 321]\n  ],\n}\n];\n\n// Groonga response data : From Groonga\n// データ部分:datasourceRequestの戻り値resultのresult.data\n\n// 非集約時\ndata: Array(2)\n  0:Array(3)\n    0:0\n    1:1596608156.696258\n    2:0.0006730556488037109\n  1:Array(1)  //データ部分\n    0:Array(508963)\n      0:Array(1) // Data Count\n        0:508961\n      1:Array(2) // Data Schema\n        0:[\"_id\", \"UInt32\"]\n        1:[\"action\", \"ref_f_action\"]\n      2:Array(2)\n        0:100\n        1:\"pass\"\n      ・・・\n      508962:Array(2)\n        0:501000\n        1:\"pass\"\n\n// 集約時\ndata: Array(2)\n  0:Array(3)\n    0:0\n    1:1596608156.696258\n    2:0.0006730556488037109\n  1:Array(2)  //データ部分\n    0:Array(12)  //非集約データ部分\n      0:Array(1) // Data Count\n        0:10\n      1:Array(1) // Data Schema\n        0:[\"AGGTIME\", \"UInt64\"]\n      2:Array(2) // Data本体：2以降Count+1まで\n        0:1595862000\n      ・・・\n      11:Array(2)\n        0:1595862000\n    1:Array(35445)  //集約データ部分\n      A:Array(35545)  //Queryごと\n        0:Array(1) // Data Count\n          0:35443\n        1:Array(1) // Data Schema\n          0: [\"_sum\", \"Int64\"] // 一つ目に集約結果データ\n          1: [\"AGGTIME\", \"UInt64\"] // 二つ目にキーとなるTime\n          2: [\"dstip\", \"ref_f_dstip\"] // 三つ目に集約キーの値\n        2: (3) [0, 1595862000, \"100.200.100.200\"]  // Data本体：2以降Count+1まで\n        3: (3) [2151, 1595862000, \"200.200.1.45\"]\n        ・・・\n        35544:(3) [89, 1595943000, \"40.50.100.60\"]\n\n// 集約時(複数Query指定時)\ndata: Array(2)\n  0:Array(3)\n    0:0\n    1:1596608156.696258\n    2:0.0006730556488037109\n  1:Array(2)  //データ部分\n    0:Array(12)  //非集約データ部分\n      0:Array(1) // Data Count\n        0:10\n      1:Array(1) // Data Schema\n        0:[\"AGGTIME\", \"UInt64\"]\n      2:Array(2) // Data本体：2以降Count+1まで\n        0:1595862000\n      ・・・\n      11:Array(2)\n        0:1595862000\n    1: //集約データ部分\n      A:Array(273)  //Queryごと\n        0:Array(1) // Data Count\n          0:271\n        1:Array(1) // Data Schema\n          0: [\"_sum\", \"Int64\"] // 一つ目に集約結果データ\n          1: [\"_key\", \"UInt64\"] // 二つ目にキーとなるTime\n        2: (2) [1565121, 1595862000]  // Data本体：2以降Count+1まで\n        3: (2) [2151501, 1595862000]\n        ・・・\n        272:(2) [89, 1595943000]\n      B:Array(273)  //Queryごと\n        0:Array(1) // Data Count\n          0:271\n        1:Array(1) // Data Schema\n          0: [\"_sum\", \"Int64\"] // 一つ目に集約結果データ\n          1: [\"_key\", \"UInt64\"] // 二つ目にキーとなるTime\n        2: (2) [958322, 1595862000]  // Data本体：2以降Count+1まで\n        3: (2) [234223, 1595862000]\n        ・・・\n        272:(2) [62629, 1595943000]\n\n*/\n","import React, { ChangeEvent, PureComponent } from 'react';\nimport { LegacyForms } from '@grafana/ui';\nimport { QueryEditorProps, SelectableValue } from '@grafana/data';\nimport { DataSource } from './DataSource';\nimport { GroongaOptions, GroongaQuery } from './types';\n\nconst { FormField, Select } = LegacyForms;\n\nconst aggTypes: Array<SelectableValue<string>> = [\n  { label: 'none', value: '' },\n  { label: 'count', value: 'count' },\n  { label: 'sum', value: 'sum' },\n  { label: 'max', value: 'max' },\n  { label: 'min', value: 'min' },\n  { label: 'avg', value: 'avg' },\n];\n\nconst intervalTypes: Array<SelectableValue<string>> = [\n  { label: 'none', value: '' },\n  { label: '10s', value: '10s' },\n  { label: '30s', value: '30s' },\n  { label: '1m', value: '1m' },\n  { label: '5m', value: '5m' },\n  { label: '15m', value: '15m' },\n  { label: '30m', value: '30m' },\n  { label: '1h', value: '1h' },\n  { label: '2h', value: '2h' },\n  { label: '6h', value: '6h' },\n  { label: '1d', value: '1d' },\n  { label: '1w', value: '1w' },\n];\n\ntype Props = QueryEditorProps<DataSource, GroongaQuery, GroongaOptions>;\n\nexport class QueryEditor extends PureComponent<Props> {\n  query: GroongaQuery;\n  constructor(props: Props) {\n    super(props);\n    const defaultQuery: Partial<GroongaQuery> = {\n      queryText: '',\n      interval: '',\n      table: '',\n      column: '',\n      filter: '',\n      sortby: '',\n      limit: 1000,\n      aggregateType: '',\n      aggregateKeyStr: '',\n      aggregateTarget: '',\n      aggregateInterval: '',\n    };\n    const query = Object.assign({}, defaultQuery, props.query);\n    this.query = query;\n    this.state = {\n      queryText: query.queryText,\n      interval: query.interval,\n      table: query.table,\n      column: query.column,\n      filter: query.filter,\n      aggregateType: query.aggregateType,\n      aggregateKeyStr: query.aggregateKeyStr,\n      aggregateTarget: query.aggregateTarget,\n      aggregateInterval: query.aggregateInterval,\n      limit: query.limit,\n    };\n  }\n  onRunQuery = () => {\n    const { query } = this;\n    this.props.onChange(query);\n    this.props.onRunQuery();\n  };\n  onChangeQuery = () => {\n    const { query } = this;\n    this.props.onChange(query);\n    //this.props.onRunQuery();\n  };\n  onTableChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const value = event.target.value;\n    this.query.table = value;\n    this.setState({ value }, this.onChangeQuery);\n  };\n  onTimeChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const value = event.target.value;\n    this.query.timeField = value;\n    this.setState({ value }, this.onChangeQuery);\n  };\n\n  onQueryTextChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const value = event.target.value;\n    this.query.queryText = value;\n    this.setState({ value }, this.onChangeQuery);\n  };\n  onFilterTextChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const value = event.target.value;\n    this.query.filter = value;\n    this.setState({ value }, this.onChangeQuery);\n  };\n  onSortByTextChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const value = event.target.value;\n    this.query.sortby = value;\n    this.setState({ value }, this.onChangeQuery);\n  };\n  onLimitChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const value = parseInt(event.target.value, 10);\n    this.query.limit = value;\n    this.setState({ value }, this.onChangeQuery);\n  };\n\n  onAggregateKeyStrChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const value = event.target.value;\n    this.query.aggregateKeyStr = value;\n    this.setState({ value }, this.onChangeQuery);\n  };\n  onAggregateOptionChange = (option: SelectableValue<string>) => {\n    const { query } = this;\n    const value = option.value ? option.value : '';\n    query.aggregateType = value;\n    this.setState({ value }, this.onChangeQuery);\n  };\n  onAggregateTargetTextChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const value = event.target.value;\n    this.query.aggregateTarget = value;\n    this.setState({ value }, this.onChangeQuery);\n  };\n  onAggregateIntervalChange = (option: SelectableValue<string>) => {\n    const { query } = this;\n    const value = option.value ? option.value : '';\n    query.aggregateInterval = value;\n    this.setState({ value }, this.onChangeQuery);\n  };\n\n  render() {\n    //const query = defaults(this.props.query, defaultQuery);\n    const query = this.props.query;\n    const { table, timeField, queryText, filter, sortby, limit, aggregateKeyStr, aggregateTarget } = query;\n\n    return (\n      <>\n        <div className=\"gf-form-group\">\n          <div className=\"gf-form\">\n            <button className=\"btn btn-primary width-8\" onClick={this.onRunQuery}>\n              Query\n            </button>\n          </div>\n          <div className=\"gf-form-inline\">\n            <label className=\"gf-form-label query-keyword width-7\">FROM</label>\n            <div className=\"gf-form\">\n              <FormField\n                labelWidth={8}\n                inputWidth={16}\n                value={table || ''}\n                onChange={this.onTableChange}\n                label=\"Table name\"\n              />\n            </div>\n            <div className=\"gf-form\">\n              <FormField\n                labelWidth={8}\n                inputWidth={16}\n                value={timeField || ''}\n                onChange={this.onTimeChange}\n                label=\"Time field\"\n                tooltip=\"Name of field to use for time\"\n              />\n            </div>\n          </div>\n          <div className=\"gf-form-inline\">\n            <label className=\"gf-form-label query-keyword width-7\">SELECT</label>\n            <div className=\"gf-form\">\n              <FormField\n                labelWidth={8}\n                inputWidth={16}\n                value={queryText || ''}\n                onChange={this.onQueryTextChange}\n                label=\"Output columns\"\n                tooltip=\"Comma-separated list of columns to return\"\n              />\n              <FormField\n                labelWidth={8}\n                inputWidth={6}\n                value={limit || ''}\n                onChange={this.onLimitChange}\n                label=\"Limit\"\n                tooltip=\"Limit the number of rows in the query result\"\n              />\n            </div>\n          </div>\n          <div className=\"gf-form-inline\">\n            <label className=\"gf-form-label query-keyword width-7\">WHERE</label>\n            <div className=\"gf-form\">\n              <FormField\n                labelWidth={8}\n                inputWidth={16}\n                value={filter || ''}\n                onChange={this.onFilterTextChange}\n                label=\"Filter\"\n                tooltip=\"For example, action==_id &gt; 10000 && action='deny'\"\n              />\n            </div>\n          </div>\n          <div className=\"gf-form-inline\">\n            <label className=\"gf-form-label query-keyword width-7\">ORDER BY</label>\n            <div className=\"gf-form\">\n              <FormField\n                labelWidth={8}\n                inputWidth={16}\n                value={sortby || ''}\n                onChange={this.onSortByTextChange}\n                label=\"Sort columns\"\n                tooltip=\"Comma-separated list of columns to sort by, for example: _id,-app\"\n              />\n            </div>\n          </div>\n          <div className=\"gf-form-inline\">\n            <label className=\"gf-form-label query-keyword width-7\">GROUP BY</label>\n            <div className=\"gf-form\">\n              <FormField\n                labelWidth={8}\n                inputWidth={12}\n                value={aggregateKeyStr || ''}\n                onChange={this.onAggregateKeyStrChange}\n                label=\"Key columns\"\n                tooltip=\"Columns used to aggregate results, for example: eventtime,action\"\n              />\n              <FormField\n                labelWidth={4}\n                inputWidth={10}\n                label=\"Type\"\n                inputEl={\n                  <Select\n                    options={aggTypes}\n                    value={aggTypes.find(\n                      (option: any) =>\n                        option.value ===\n                        (this.props.query.aggregateType === undefined ? 'none' : this.props.query.aggregateType)\n                    )}\n                    onChange={this.onAggregateOptionChange}\n                  />\n                }\n              />\n              <FormField\n                labelWidth={6}\n                inputWidth={8}\n                value={aggregateTarget || ''}\n                onChange={this.onAggregateTargetTextChange}\n                label=\"Target\"\n                tooltip=\"Column to use as an aggregation target\"\n              />\n              <FormField\n                labelWidth={4}\n                inputWidth={10}\n                label=\"Interval\"\n                inputEl={\n                  <Select\n                    options={intervalTypes}\n                    value={intervalTypes.find(\n                      (option: any) =>\n                        option.value ===\n                        (this.props.query.aggregateInterval === undefined ? 'none' : this.props.query.aggregateInterval)\n                    )}\n                    onChange={this.onAggregateIntervalChange}\n                  />\n                }\n              />\n            </div>\n          </div>\n        </div>\n      </>\n    );\n  }\n}\n","import { DataSourcePlugin } from '@grafana/data';\nimport { DataSource } from './DataSource';\nimport { ConfigEditor } from './ConfigEditor';\nimport { QueryEditor } from './QueryEditor';\nimport { GroongaQuery, GroongaOptions } from './types';\n\nexport const plugin = new DataSourcePlugin<DataSource, GroongaQuery, GroongaOptions>(DataSource)\n  .setConfigEditor(ConfigEditor)\n  .setQueryEditor(QueryEditor);\n","import _ from 'lodash';\n\nexport const aggTypes = [\n  { text: 'None', value: 'none', columnText: '', queryText: '', requiresField: false, isGraphAggType: false },\n  {\n    text: 'Count',\n    value: 'count',\n    columnText: '_nsubrecs',\n    queryText: 'COUNT',\n    requiresField: false,\n    isGraphAggType: true,\n  },\n  {\n    text: 'Average',\n    value: 'avg',\n    columnText: '_avg',\n    queryText: 'AVG',\n    requiresField: true,\n    isGraphAggType: true,\n  },\n  {\n    text: 'Sum',\n    value: 'sum',\n    columnText: '_sum',\n    queryText: 'SUM',\n    requiresField: true,\n    isGraphAggType: true,\n  },\n  {\n    text: 'Max',\n    value: 'max',\n    columnText: '_max',\n    queryText: 'MAX',\n    requiresField: true,\n    isGraphAggType: true,\n  },\n  {\n    text: 'Min',\n    value: 'min',\n    columnText: '_min',\n    queryText: 'MIN',\n    requiresField: true,\n    isGraphAggType: true,\n  },\n];\n\nexport function getAggTypes() {\n  return _.filter(aggTypes);\n}\nexport function getAggTypesTextStr(_agg: string): string {\n  let aggType = aggTypes.find((aggType: any) => aggType.value === _agg);\n  if (aggType === undefined) {\n    return '';\n  } else {\n    return aggType.text;\n  }\n}\nexport function getAggTypesColumnStr(_agg: string): string {\n  let aggType = aggTypes.find((aggType: any) => aggType.value === _agg);\n  if (aggType === undefined) {\n    return '';\n  } else {\n    return aggType.columnText;\n  }\n}\nexport function getAggTypesQueryStr(_agg: string): string {\n  let aggType = aggTypes.find((aggType: any) => aggType.value === _agg);\n  if (aggType === undefined) {\n    return '';\n  } else {\n    return aggType.queryText;\n  }\n}\nexport function isGraphAggregateType(_agg: string): boolean {\n  let aggType = aggTypes.find((aggType: any) => aggType.value === _agg);\n  if (aggType === undefined) {\n    return false;\n  } else {\n    return aggType.isGraphAggType;\n  }\n}\n\n/*\nfunction getAggType(_agg: string): string {\n  switch (_agg) {\n    case 'count':\n      return 'count';\n    case 'min':\n      return 'min';\n    case 'max':\n      return 'max';\n    case 'sum':\n    default:\n      return 'sum';\n      break;\n  }\n}\n*/\n/*\nfunction getAggTypeStr(_agg: string): string {\n  let ret = '';\n  switch (_agg) {\n    case 'none':\n    default:\n      break;\n    case 'count':\n      ret = '_nsubrecs';\n      break;\n    case 'min':\n      ret = '_min';\n      break;\n    case 'max':\n      ret = '_max';\n      break;\n    case 'avg':\n      ret = '_avg';\n      break;\n    case 'sum':\n      ret = '_sum';\n      break;\n  }\n  return ret;\n}\nfunction getAggColumnStr(_agg: string): string {\n  let ret = '';\n  switch (_agg) {\n    case 'none':\n    default:\n      break;\n    case 'count':\n      ret = 'COUNT';\n      break;\n    case 'min':\n      ret = 'MIN';\n      break;\n    case 'max':\n      ret = 'MAX';\n      break;\n    case 'avg':\n      ret = 'AVG';\n      break;\n    case 'sum':\n      ret = 'SUM';\n      break;\n  }\n  return ret;\n}\n*/\n","import { GroongaQuery } from 'types';\nimport * as queryDefs from './query_def';\n\nconst timekey_alias = 'AGGTIME';\n\ninterface AggregateParam {\n  refId: string;\n  aggType: string;\n  aggKeyStr: string;\n  aggTarget: string;\n  aggInterval: string;\n}\n\nexport class SelectParameters {\n  timeField: string;\n  rangeFrom: number;\n  rangeTo: number;\n\n  table: string;\n\n  query: string;\n  filter: string;\n  sortby: string;\n  limit: number;\n  intervalMs: number;\n\n  aggs: AggregateParam[];\n\n  constructor(\n    _tableField: string,\n    _timeField: string,\n    _groongaQuerys: GroongaQuery[],\n    _timeRangeFrom: number,\n    _timeRangeTo: number,\n    _intervalMs: number\n  ) {\n    this.rangeFrom = _timeRangeFrom;\n    this.rangeTo = _timeRangeTo;\n    if (_groongaQuerys[0].table !== undefined && _groongaQuerys[0].table.length > 0) {\n      this.table = _groongaQuerys[0].table;\n    } else {\n      this.table = _tableField;\n    }\n    if (_groongaQuerys[0].timeField !== undefined && _groongaQuerys[0].timeField.length > 0) {\n      this.timeField = _groongaQuerys[0].timeField;\n    } else {\n      this.timeField = _timeField;\n    }\n    this.query = _groongaQuerys[0].queryText === undefined ? '' : _groongaQuerys[0].queryText;\n    this.filter = _groongaQuerys[0].filter;\n    this.sortby = _groongaQuerys[0].sortby;\n    this.limit = _groongaQuerys[0].limit;\n\n    this.aggs = [];\n    _groongaQuerys.forEach((_agg: GroongaQuery) => {\n      let agg: AggregateParam = {\n        refId: _agg.refId,\n        aggType: _agg.aggregateType,\n        aggKeyStr: _agg.aggregateKeyStr,\n        aggTarget: _agg.aggregateTarget,\n        aggInterval: _agg.aggregateInterval === undefined ? '' : _agg.aggregateInterval,\n      };\n      this.aggs.push(agg);\n    });\n    this.intervalMs = _intervalMs === undefined ? 1000 : _intervalMs;\n  }\n\n  private isEnableAggregate(_index: number) {\n    let index = _index < 0 || _index >= this.aggs.length ? 0 : _index;\n    let aggQuery = queryDefs.getAggTypesQueryStr(this.aggs[index].aggType);\n    return this.isExist(this.aggs[index].aggKeyStr) && aggQuery.length > 0;\n  }\n\n  getAggTimeColName(): string {\n    return timekey_alias;\n  }\n  isOnlyAggTimeCol(_index: number): boolean {\n    let index = _index < 0 || _index >= this.aggs.length ? 0 : _index;\n    return this.aggs[index].aggKeyStr === this.getAggTimeColName();\n  }\n\n  isAggregate(_index: number): boolean {\n    let index = _index < 0 || _index >= this.aggs.length ? 0 : _index;\n    let aggQuery = queryDefs.getAggTypesQueryStr(this.aggs[index].aggType);\n    return this.isExist(this.aggs[index].aggKeyStr) && aggQuery.length > 0;\n  }\n\n  getQueries(): any {\n    return this.splitCsv(this.query);\n  }\n  getMetrics(_index: number): any {\n    let index = _index < 0 || _index >= this.aggs.length ? 0 : _index;\n    return this.splitCsv(this.aggs[index].aggKeyStr);\n  }\n\n  buildQueryParameters(): string {\n    const limitNumDefault = 10; // default\n    let bEnableAggregate = this.isEnableAggregate(0);\n\n    // create groonga api parameter\n    let serializedOptionStr = '';\n    // table : table name\n    serializedOptionStr += this.getQueryStr(false, 'table', this.table);\n    // filter : time range\n    let timeRange = '';\n    if (this.isExist(this.timeField)) {\n      timeRange = 'between(' + this.timeField + ',' + this.rangeFrom.toString() + ',' + this.rangeTo.toString() + ')';\n    }\n    serializedOptionStr += this.getQueryStr(true, 'filter', timeRange);\n    // filter : filter string\n    if (this.isExist(this.filter)) {\n      serializedOptionStr += '%26%26' + this.filter.replace(/&/g, '%26');\n    }\n    // limit : target record num\n    if (this.limit !== undefined && this.limit >= 0) {\n      let limitNum = bEnableAggregate ? limitNumDefault : this.limit;\n      serializedOptionStr += this.getQueryStr(true, 'limit', limitNum);\n    }\n    // output_columns : output columns (not aggregate)\n    if (this.isExist(this.query)) {\n      serializedOptionStr += this.getQueryStr(true, 'output_columns', this.query);\n    }\n\n    if (!bEnableAggregate) {\n      // without aggregate parameters\n      // sortby : sort key columns (not aggregate)\n      if (this.isExist(this.sortby)) {\n        serializedOptionStr += this.getQueryStr(true, 'sortby', this.sortby);\n      }\n    } else {\n      // Drilldown data\n      this.aggs.forEach((agg: AggregateParam, index: number) => {\n        serializedOptionStr += this.getDrilldownStrs(index);\n      });\n\n      //span agg\n      if (this.aggs[0].aggInterval !== undefined && this.aggs[0].aggInterval.length > 0) {\n        serializedOptionStr += this.getColumnsStr(true, 'stage', 'initial');\n        serializedOptionStr += this.getColumnsStr(true, 'type', 'Time');\n        let timeKeyStr = this.getTimeClassifyStr(this.aggs[0].aggInterval);\n        serializedOptionStr += this.getColumnsStr(true, 'value', timeKeyStr);\n      }\n    }\n    return serializedOptionStr;\n  }\n\n  private getTimeClassifyStr(intervalStr: string) {\n    let defaultStr = 'time_classify_minute(' + this.timeField + ',1)';\n    if (intervalStr === undefined || intervalStr.length <= 0) {\n      return defaultStr;\n    }\n\n    let ret = 'time_classify_';\n    let value = intervalStr.replace(/[^0-9]/g, '');\n    let unit = intervalStr.slice(-1);\n    switch (unit) {\n      case 's':\n        ret += 'second';\n        break;\n      case 'm':\n        ret += 'minute';\n        break;\n      case 'h':\n        ret += 'hour';\n        break;\n      case 'd':\n        ret += 'day';\n        break;\n      case 'w':\n        ret += 'week';\n        break;\n      case 'M':\n        ret += 'month';\n        break;\n      case 'Y':\n        ret += 'year';\n        break;\n      default:\n        return defaultStr;\n    }\n    ret += '(' + this.timeField + ',' + value + ')';\n    return ret;\n  }\n\n  private getDrilldownStrs(_index: number): string {\n    let index = _index < 0 || _index >= this.aggs.length ? 0 : _index;\n    let metrics = this.splitCsv(this.aggs[index].aggKeyStr);\n    let aggQuery = queryDefs.getAggTypesQueryStr(this.aggs[index].aggType);\n    let aggCol = queryDefs.getAggTypesColumnStr(this.aggs[index].aggType);\n    let ddStrs = '';\n    // aggregate parameters\n    ddStrs += this.getDrilldownsStr(index, true, 'keys', this.aggs[index].aggKeyStr);\n    ddStrs += this.getDrilldownsStr(index, true, 'output_columns', aggCol);\n    if (metrics === undefined || metrics.length <= 1) {\n      ddStrs += ',_key';\n    } else {\n      metrics.forEach(m => (ddStrs += ',_value.' + m));\n    }\n    //serializedOptionStr += '&drilldowns[' + refId + '].output_columns=_key,_nsubrecs,_max,_min,_sum,_avg';\n    //serializedOptionStr += '&drilldowns[' + refId + '].calc_types=COUNT,MAX,MIN,SUM,AVG';\n    ddStrs += this.getDrilldownsStr(index, true, 'calc_types', aggQuery);\n\n    let limitNum = 10; // defalut\n    if (this.limit !== undefined && this.limit >= 0) {\n      limitNum = this.limit;\n    }\n    ddStrs += this.getDrilldownsStr(index, true, 'limit', limitNum);\n\n    //serializedOptionStr += '&drilldowns[' + refId + '].calc_target=_id';\n    if (this.isExist(this.aggs[index].aggTarget)) {\n      ddStrs += this.getDrilldownsStr(index, true, 'calc_target', this.aggs[index].aggTarget);\n    }\n\n    ddStrs += this.getDrilldownsStr(index, true, 'sort_keys', '');\n    if (metrics === undefined || metrics.length <= 1) {\n      ddStrs += '_key';\n    } else {\n      metrics.forEach(m => (ddStrs += '_value.' + m + ','));\n      ddStrs += aggCol;\n    }\n    return ddStrs;\n  }\n\n  private getQueryStr(needFirstAmpersand: boolean, paramname: string, paramvalue: any): string {\n    return (needFirstAmpersand ? '&' : '') + paramname + '=' + paramvalue;\n  }\n  private getDrilldownsStr(index: number, needFirstAmpersand: boolean, paramname: string, paramvalue: any): string {\n    return (\n      (needFirstAmpersand ? '&' : '') + 'drilldowns[' + this.aggs[index].refId + '].' + paramname + '=' + paramvalue\n    );\n  }\n\n  private getColumnsStr(needFirstAmpersand: boolean, paramname: string, paramvalue: any): string {\n    return (\n      (needFirstAmpersand ? '&' : '') + 'columns[' + this.getAggTimeColName() + '].' + paramname + '=' + paramvalue\n    );\n  }\n\n  private isExist(_str?: string) {\n    return !(_str === undefined || _str.length <= 0);\n  }\n\n  private splitCsv(_csvstr?: string) {\n    let arr = _csvstr?.split(',');\n    if (arr === undefined || arr?.length <= 0 || (arr?.length === 1 && arr[0].length <= 0)) {\n      arr = undefined;\n    }\n    return arr;\n  }\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE__grafana_data__;","module.exports = __WEBPACK_EXTERNAL_MODULE__grafana_runtime__;","module.exports = __WEBPACK_EXTERNAL_MODULE__grafana_ui__;","module.exports = __WEBPACK_EXTERNAL_MODULE_lodash__;","module.exports = __WEBPACK_EXTERNAL_MODULE_react__;"],"sourceRoot":""}